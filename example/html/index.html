<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>HTML Demo</title>
</head>
<body>
<script src="/dist/index.global.js"></script>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script>
    const monitor = new WebEyeLogs.Monitor({
        appKey: "xxxxx",
        reportUrl: "http://localhost:8989/report/v1",
    });

    monitor
        .use(new WebEyeLogs.ConsolePlugin())
        .use(new WebEyeLogs.WhiteScreenPlugin({
            checkDOMCount: false,
            // skipSelectors: ["meta", "head", "script", "style"], // 忽略的元素选择器(checkDOMCount 为 true 时生效)
            // whiteScreenDoms: ["#root"],
        }))
        // .use(new WebEyeLogs.PerformancePlugin())
        .use(new WebEyeLogs.CustomPlugin())
        .use(new WebEyeLogs.ErrorPlugin({
            enableBehaviorReport: false,      // 启用行为上报
            behaviorDelay: 5000,            // 延迟上报时间(ms) enableBehaviorReport 为 true 时有效
            maxBehaviorRecords: 50,         // 最大行为记录数
            enableSourceMap: true,          // 启用source map解析
            filterErrors: (error) => true   // 错误过滤函数
        }))
        .use(new WebEyeLogs.RequestPlugin())
        .use(new WebEyeLogs.ResourcePlugin())
        .use(new WebEyeLogs.RecordPlugin())
        .install();

    setTimeout(() => {
        axios.get("http://localhost:8989/health", {
            config: {
                headers: {
                    token: "xxxxxxxxxxxxxxxxxxxx",
                    dddddd: "ddddddddddd",
                }
            }
        }).then(res => {
            console.log("axios res: ", res);
        }).catch(error => {
            console.log("axios error: ",  error);
        });

        const headers = new Headers();
        headers.set("token", "xxxxxxxxxxxxxxxxxxxx");
        headers.set("ddddddd", "ddddddddddd");
        fetch("http://localhost:8989/health", {
            method: "GET",
        }).then(res => {
            console.info("fetch res 1: ", res);
            return res.json();
        }).then(res => {
            console.info("fetch res 2: ", res);
        }).catch(err => {
            console.info("fetch err: ", err);
        })
    }, 1000)

    /*setTimeout(()=>{
        const obj = {a: 1, b: {c: 2}, d: {e: {f: 3}}};
        console.info("a: ", obj.a)
        console.info("b: ", obj.b)
        console.info("c: ", obj.b.c)
        console.info("d: ", obj.d)
        console.info("e: ", obj.d.e)
        console.info("f: ", obj.d.e.f)
        console.info("g: ", obj.d.e.f.g.h);
    }, 2000)*/
</script>
<!--<script src="dddddd.js"></script>-->
<h3>111111111111111111111111</h3>
<h3>222222222222222222222222</h3>
<h3>333333333333333333333333</h3>
<h3>444444444444444444444444</h3>
<h3>555555555555555555555555</h3>
<h3>666666666666666666666666</h3>
<h3>777777777777777777777777</h3>
<h3>888888888888888888888888</h3>
<h3>999999999999999999999999</h3>
</body>
</html>